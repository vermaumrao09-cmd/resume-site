<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Reel Downloader</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 450px; text-align: center; }
        h2 { color: #d62976; margin-bottom: 1.5rem; }
        input { width: 90%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 1rem; outline: none; transition: 0.3s; }
        input:focus { border-color: #d62976; }
        button { background: #d62976; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.3s; }
        button:hover { background: #fa7e1e; }
        #result { margin-top: 20px; word-break: break-all; }
        .download-btn { display: inline-block; margin-top: 10px; background: #4CAF50; color: white; text-decoration: none; padding: 10px 20px; border-radius: 5px; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #d62976; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; display: none; margin: 10px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="card">
    <h2>Reel Downloader</h2>
    <input type="text" id="reelUrl" placeholder="Paste Instagram Reel Link Here...">
    <button onclick="downloadVideo()" id="btnText">Video Link Nikalein</button>
    <div class="loader" id="loader"></div>
    <div id="result"></div>
</div>

<script>
    async function downloadVideo() {
        const urlInput = document.getElementById('reelUrl').value;
        const resultDiv = document.getElementById('result');
        const loader = document.getElementById('loader');
        const btn = document.getElementById('btnText');

        if (!urlInput) {
            alert("Please paste a URL first!");
            return;
        }

        // UI Reset
        resultDiv.innerHTML = "";
        loader.style.display = "block";
        btn.disabled = true;

        try {
            // AAPKA WORKER URL
            const workerUrl = 'https://dry-bar-ef61.vermaumrao09.workers.dev';

            const response = await fetch(workerUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ reelUrl: urlInput })
            });

            const data = await response.json();

            if (data.status === "success" && data.url) {
                resultDiv.innerHTML = `
                    <p style="color: green;">Video Taiyaar Hai!</p>
                    <a href="${data.url}" target="_blank" class="download-btn">Download Video</a>
                    <p style="font-size: 12px; margin-top: 10px; color: #666;">Note: Link par click karke 3 dots par click karein aur Download chunein.</p>
                `;
            } else {
                resultDiv.innerHTML = `<p style="color: red;">Error: Video nahi mil saki. Token ya Signature expire ho sakta hai.</p>`;
            }
        } catch (error) {
            resultDiv.innerHTML = `<p style="color: red;">Worker Error: Check console for details.</p>`;
            console.error(error);
        } finally {
            loader.style.display = "none";
            btn.disabled = false;
        }
    }
</script>

</body>
</html>
